<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trang chủ của tao</title>

    <!-- config -->
    <script src="config/config.js"></script>

    <link href="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.css" rel="stylesheet">
    <script src="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.js"></script>
</head>

<body>
    <input type="text" id="input">
    <div style="color: red; display: none" id="note">Không được rỗng</div>

    <script>
        var validate = {
            test: function (elem) {
                var isForm = elem[0].tagName.toLowerCase() == 'form',
                    isInput = elem[0].tagName.toLowerCase() == 'input';
                if (isInput) {
                    if (elem.data('validate') != undefined)
                        return this[elem.data('validate')](elem.val());
                    else return true;
                } else {
                    if (isForm) {
                        var checkLegal = elem.find('input[name="legal"]');
                        if (checkLegal.length) {
                            if (checkLegal.prop('checked') == false) {
                                checkLegal.next().addClass('error');
                                return false;
                            }
                        }
                        elem.find("div.button").addClass('disabled');
                        var success = true,
                            s, inputs = elem.find('input');
                        for (var i = 0; i < inputs.length; i++) {
                            s = this.test($(inputs[i]));
                            if (s) {
                                $(inputs[i]).closest(".input-group").removeClass('error');
                            } else {
                                $(inputs[i]).closest(".input-group").addClass('error');
                            }
                            success = success && s;
                        }
                        if (success) {
                            //  do ajax call
                            setTimeout(function () {
                                elem.find("div.button").removeClass('disabled');
                            }, 1000);
                        } else {
                            elem.find("div.button").removeClass('disabled');
                        }
                    }
                }
            },
            youtube: function (val) { // id_youtube
                var er = /^((?:https?:)?\/\/)?((?:www|m)\.)?((?:youtube\.com|youtu.be))(\/(?:[\w\-]+\?v=|embed\/|v\/)?)([\w\-0-9]+)(\S+)?$/;
                var matches = val.match(er);
                if (matches && matches.length > 5) {
                    $("input[name='id_youtube']").val(matches[5]);
                    return true;
                }
                return false;
            },
            email: function (val) {
                return /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(val);
            },
            isEmpty: function (val) {
                return val.length == 0;
            }
        };


        const element = document.getElementById('input');
        let note = document.getElementById('note');
        element.addEventListener('keyup', function (e) {
            if (validate.isEmpty(element.value)) {
                note.style.display = 'block';
            } else {
                note.style.display = 'none';
            }
        });
    </script>
</body>

</html>